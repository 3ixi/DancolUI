<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·ç®¡ç† - Dancol UI Framework</title>

    <!-- é˜²é—ªçƒä¸»é¢˜é¢„åŠ è½½è„šæœ¬ -->
    <script>
        (function() {
            // ç«‹å³ä»localStorageè¯»å–ä¸»é¢˜è®¾ç½®
            try {
                const savedTheme = localStorage.getItem('dancol-theme');
                if (savedTheme) {
                    document.documentElement.setAttribute('data-theme', savedTheme);
                } else {
                    // é»˜è®¤ä¸»é¢˜
                    document.documentElement.setAttribute('data-theme', 'light-blue');
                }
            } catch (e) {
                // å¦‚æœlocalStorageä¸å¯ç”¨ï¼Œä½¿ç”¨é»˜è®¤ä¸»é¢˜
                document.documentElement.setAttribute('data-theme', 'light-blue');
            }
        })();
    </script>

    <!-- Dancol CSS -->
    <link rel="stylesheet" href="../assets/css/dancol-core.css">
    <link rel="stylesheet" href="../assets/css/dancol-themes.css">
    <link rel="stylesheet" href="../assets/css/dancol-components.css">

    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <style>
        /* ç”¨æˆ·ç®¡ç†é¡µé¢ä¸“ç”¨æ ·å¼ */
        .user-management-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            grid-template-rows: 60px 1fr;
            grid-template-areas: 
                "sidebar header"
                "sidebar main";
            min-height: 100vh;
            background-color: var(--dancol-bg-secondary);
        }

        /* å¤ç”¨ç®¡ç†å‘˜ä»ªè¡¨æ¿çš„å¤´éƒ¨å’Œä¾§è¾¹æ æ ·å¼ */
        .admin-header {
            grid-area: header;
            background: var(--dancol-bg-primary);
            border-bottom: 1px solid var(--dancol-border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--dancol-spacing-lg);
            box-shadow: var(--dancol-shadow-sm);
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--dancol-spacing-md);
        }

        .header-title {
            font-size: var(--dancol-text-lg);
            font-weight: 600;
            color: var(--dancol-text-primary);
            margin: 0;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--dancol-spacing-md);
        }

        .admin-sidebar {
            grid-area: sidebar;
            background: var(--dancol-bg-primary);
            border-right: 1px solid var(--dancol-border-light);
            padding: var(--dancol-spacing-lg) 0;
            overflow-y: auto;
        }

        .sidebar-brand {
            display: flex;
            align-items: center;
            gap: var(--dancol-spacing-sm);
            padding: 0 var(--dancol-spacing-lg);
            margin-bottom: var(--dancol-spacing-xl);
        }

        .brand-logo {
            width: 32px;
            height: 32px;
            background: linear-gradient(45deg, var(--dancol-primary), var(--dancol-primary-light));
            border-radius: var(--dancol-radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .brand-text {
            font-size: var(--dancol-text-lg);
            font-weight: 700;
            color: var(--dancol-text-primary);
        }

        .sidebar-nav {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .nav-item {
            margin-bottom: var(--dancol-spacing-xs);
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: var(--dancol-spacing-sm);
            padding: var(--dancol-spacing-sm) var(--dancol-spacing-lg);
            color: var(--dancol-text-secondary);
            text-decoration: none;
            font-size: var(--dancol-text-sm);
            font-weight: 500;
            transition: all var(--dancol-transition-fast);
            border-right: 3px solid transparent;
        }

        .nav-link:hover,
        .nav-link.active {
            background-color: var(--dancol-accent);
            color: var(--dancol-primary);
            border-right-color: var(--dancol-primary);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .user-main {
            grid-area: main;
            padding: var(--dancol-spacing-lg);
            overflow-y: auto;
        }

        /* é¡µé¢å¤´éƒ¨ */
        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--dancol-spacing-xl);
            padding-bottom: var(--dancol-spacing-lg);
            border-bottom: 1px solid var(--dancol-border-light);
        }

        .page-title {
            font-size: var(--dancol-text-2xl);
            font-weight: 700;
            color: var(--dancol-text-primary);
            margin: 0;
        }

        .page-actions {
            display: flex;
            gap: var(--dancol-spacing-sm);
        }

        /* æœç´¢å’Œç­›é€‰åŒºåŸŸ */
        .search-filters {
            background: var(--dancol-bg-primary);
            border-radius: var(--dancol-radius-lg);
            padding: var(--dancol-spacing-lg);
            margin-bottom: var(--dancol-spacing-lg);
            box-shadow: var(--dancol-shadow-sm);
        }

        .filter-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr auto;
            gap: var(--dancol-spacing-md);
            align-items: end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: var(--dancol-spacing-xs);
        }

        .filter-label {
            font-size: var(--dancol-text-sm);
            font-weight: 500;
            color: var(--dancol-text-primary);
        }

        .search-input {
            padding: var(--dancol-spacing-sm) var(--dancol-spacing-md);
            border: 1px solid var(--dancol-border-medium);
            border-radius: var(--dancol-radius-md);
            font-size: var(--dancol-text-sm);
        }

        .filter-select {
            padding: var(--dancol-spacing-sm) var(--dancol-spacing-md);
            border: 1px solid var(--dancol-border-medium);
            border-radius: var(--dancol-radius-md);
            font-size: var(--dancol-text-sm);
            background-color: var(--dancol-bg-primary);
        }

        /* è§†å›¾åˆ‡æ¢ */
        .view-toggle {
            display: flex;
            background: var(--dancol-bg-secondary);
            border-radius: var(--dancol-radius-md);
            padding: var(--dancol-spacing-xs);
            margin-bottom: var(--dancol-spacing-lg);
        }

        .view-btn {
            padding: var(--dancol-spacing-xs) var(--dancol-spacing-md);
            border: none;
            background: transparent;
            border-radius: var(--dancol-radius-sm);
            cursor: pointer;
            font-size: var(--dancol-text-sm);
            color: var(--dancol-text-secondary);
            transition: all var(--dancol-transition-fast);
        }

        .view-btn.active {
            background: var(--dancol-bg-primary);
            color: var(--dancol-primary);
            box-shadow: var(--dancol-shadow-sm);
        }

        /* ç”¨æˆ·è¡¨æ ¼è§†å›¾ */
        .users-table-container {
            background: var(--dancol-bg-primary);
            border-radius: var(--dancol-radius-lg);
            overflow: hidden;
            box-shadow: var(--dancol-shadow-sm);
        }

        .users-table {
            width: 100%;
            border-collapse: collapse;
        }

        .users-table th {
            background: var(--dancol-bg-secondary);
            padding: var(--dancol-spacing-md);
            text-align: left;
            font-weight: 600;
            color: var(--dancol-text-primary);
            border-bottom: 1px solid var(--dancol-border-light);
        }

        .users-table td {
            padding: var(--dancol-spacing-md);
            border-bottom: 1px solid var(--dancol-border-light);
            vertical-align: middle;
        }

        .users-table tr:hover {
            background-color: var(--dancol-accent);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: var(--dancol-spacing-sm);
        }

        .user-details {
            display: flex;
            flex-direction: column;
            gap: var(--dancol-spacing-xs);
        }

        .user-name {
            font-weight: 500;
            color: var(--dancol-text-primary);
        }

        .user-email {
            font-size: var(--dancol-text-sm);
            color: var(--dancol-text-muted);
        }

        .user-actions {
            display: flex;
            gap: var(--dancol-spacing-xs);
        }

        .action-btn {
            padding: var(--dancol-spacing-xs) var(--dancol-spacing-sm);
            border: none;
            border-radius: var(--dancol-radius-sm);
            cursor: pointer;
            font-size: var(--dancol-text-xs);
            transition: all var(--dancol-transition-fast);
        }

        .action-btn.edit {
            background: var(--dancol-info);
            color: white;
        }

        .action-btn.delete {
            background: var(--dancol-error);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--dancol-shadow-sm);
        }

        /* ç”¨æˆ·å¡ç‰‡è§†å›¾ */
        .users-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--dancol-spacing-lg);
        }

        .user-card {
            background: var(--dancol-bg-primary);
            border-radius: var(--dancol-radius-lg);
            padding: var(--dancol-spacing-lg);
            box-shadow: var(--dancol-shadow-sm);
            transition: transform var(--dancol-transition-fast), box-shadow var(--dancol-transition-fast);
        }

        .user-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--dancol-shadow-md);
        }

        .user-card-header {
            display: flex;
            align-items: center;
            gap: var(--dancol-spacing-md);
            margin-bottom: var(--dancol-spacing-md);
        }

        .user-card-info {
            flex: 1;
        }

        .user-card-name {
            font-size: var(--dancol-text-lg);
            font-weight: 600;
            color: var(--dancol-text-primary);
            margin-bottom: var(--dancol-spacing-xs);
        }

        .user-card-email {
            color: var(--dancol-text-muted);
            font-size: var(--dancol-text-sm);
        }

        .user-card-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--dancol-spacing-md);
            margin-bottom: var(--dancol-spacing-md);
            padding: var(--dancol-spacing-md);
            background: var(--dancol-bg-secondary);
            border-radius: var(--dancol-radius-md);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: var(--dancol-text-lg);
            font-weight: 600;
            color: var(--dancol-text-primary);
        }

        .stat-label {
            font-size: var(--dancol-text-xs);
            color: var(--dancol-text-muted);
            margin-top: var(--dancol-spacing-xs);
        }

        .user-card-actions {
            display: flex;
            gap: var(--dancol-spacing-sm);
        }

        /* åˆ†é¡µ */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--dancol-spacing-sm);
            margin-top: var(--dancol-spacing-xl);
        }

        .pagination-btn {
            padding: var(--dancol-spacing-sm) var(--dancol-spacing-md);
            border: 1px solid var(--dancol-border-medium);
            background: var(--dancol-bg-primary);
            border-radius: var(--dancol-radius-md);
            cursor: pointer;
            transition: all var(--dancol-transition-fast);
        }

        .pagination-btn:hover,
        .pagination-btn.active {
            background: var(--dancol-primary);
            color: white;
            border-color: var(--dancol-primary);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ç§»åŠ¨ç«¯æ±‰å ¡èœå• */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: var(--dancol-spacing-xs);
            color: var(--dancol-text-primary);
            font-size: 1.5rem;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .user-management-layout {
                grid-template-columns: 1fr;
                grid-template-areas: 
                    "header"
                    "main";
            }

            .admin-sidebar {
                position: fixed;
                top: 60px;
                left: -250px;
                width: 250px;
                height: calc(100vh - 60px);
                z-index: 1000;
                transition: left var(--dancol-transition-normal);
                box-shadow: var(--dancol-shadow-lg);
            }

            .admin-sidebar.active {
                left: 0;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .filter-row {
                grid-template-columns: 1fr;
                gap: var(--dancol-spacing-sm);
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--dancol-spacing-md);
            }

            .users-grid {
                grid-template-columns: 1fr;
            }

            .users-table-container {
                overflow-x: auto;
            }

            .users-table {
                min-width: 600px;
            }
        }

        @media (max-width: 480px) {
            .user-main {
                padding: var(--dancol-spacing-md);
            }

            .search-filters {
                padding: var(--dancol-spacing-md);
            }

            .user-card {
                padding: var(--dancol-spacing-md);
            }

            .user-card-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="user-management-layout">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <header class="admin-header">
            <div class="header-left">
                <button class="mobile-menu-toggle" onclick="toggleSidebar()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <h1 class="header-title">ç”¨æˆ·ç®¡ç†</h1>
            </div>
            <div class="header-right">
                <div class="header-user">
                    <img src="../assets/images/avatar.jpg"
                         class="dancol-avatar dancol-avatar-sm" alt="ç®¡ç†å‘˜å¤´åƒ">
                    <div class="user-info">
                        <div class="user-name">å¼ ç®¡ç†å‘˜</div>
                        <div class="user-role">ç³»ç»Ÿç®¡ç†å‘˜</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- ä¾§è¾¹æ  -->
        <aside class="admin-sidebar" id="adminSidebar">
            <div class="sidebar-brand">
                <div class="brand-logo">D</div>
                <div class="brand-text">Dancol Admin</div>
            </div>
            <nav>
                <ul class="sidebar-nav">
                    <li class="nav-item">
                        <a href="admin-dashboard.html" class="nav-link">
                            <span class="nav-icon">ğŸ“Š</span>
                            <span>ä»ªè¡¨æ¿</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link active">
                            <span class="nav-icon">ğŸ‘¥</span>
                            <span>ç”¨æˆ·ç®¡ç†</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">ğŸ“¦</span>
                            <span>è®¢å•ç®¡ç†</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">ğŸ›ï¸</span>
                            <span>å•†å“ç®¡ç†</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">ğŸ“ˆ</span>
                            <span>æ•°æ®åˆ†æ</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <span class="nav-icon">âš™ï¸</span>
                            <span>ç³»ç»Ÿè®¾ç½®</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="../api-reference.html" class="nav-link">
                            <span class="nav-icon">ğŸ“š</span>
                            <span>è¿”å›æ–‡æ¡£</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <main class="user-main">
            <!-- é¡µé¢å¤´éƒ¨ -->
            <div class="page-header">
                <h2 class="page-title">ç”¨æˆ·ç®¡ç†</h2>
                <div class="page-actions">
                    <button class="dancol-btn dancol-btn-outline" onclick="exportUsers()">
                        <span>ğŸ“Š</span>
                        <span>å¯¼å‡ºæ•°æ®</span>
                    </button>
                    <button class="dancol-btn dancol-btn-primary" onclick="addUser()">
                        <span>â•</span>
                        <span>æ·»åŠ ç”¨æˆ·</span>
                    </button>
                </div>
            </div>

            <!-- æœç´¢å’Œç­›é€‰ -->
            <div class="search-filters">
                <div class="filter-row">
                    <div class="filter-group">
                        <label class="filter-label">æœç´¢ç”¨æˆ·</label>
                        <input type="text" class="search-input" placeholder="è¾“å…¥ç”¨æˆ·åã€é‚®ç®±æˆ–æ‰‹æœºå·..."
                               onkeyup="searchUsers(this.value)">
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">ç”¨æˆ·çŠ¶æ€</label>
                        <select class="filter-select" onchange="filterByStatus(this.value)">
                            <option value="">å…¨éƒ¨çŠ¶æ€</option>
                            <option value="active">æ´»è·ƒ</option>
                            <option value="inactive">éæ´»è·ƒ</option>
                            <option value="banned">å·²ç¦ç”¨</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">ç”¨æˆ·ç±»å‹</label>
                        <select class="filter-select" onchange="filterByType(this.value)">
                            <option value="">å…¨éƒ¨ç±»å‹</option>
                            <option value="vip">VIPç”¨æˆ·</option>
                            <option value="regular">æ™®é€šç”¨æˆ·</option>
                            <option value="admin">ç®¡ç†å‘˜</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">æ³¨å†Œæ—¶é—´</label>
                        <select class="filter-select" onchange="filterByDate(this.value)">
                            <option value="">å…¨éƒ¨æ—¶é—´</option>
                            <option value="today">ä»Šå¤©</option>
                            <option value="week">æœ¬å‘¨</option>
                            <option value="month">æœ¬æœˆ</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">&nbsp;</label>
                        <button class="dancol-btn dancol-btn-secondary" onclick="resetFilters()">é‡ç½®</button>
                    </div>
                </div>
            </div>

            <!-- è§†å›¾åˆ‡æ¢ -->
            <div class="view-toggle">
                <button class="view-btn active" onclick="switchView('table')">ğŸ“‹ è¡¨æ ¼è§†å›¾</button>
                <button class="view-btn" onclick="switchView('grid')">ğŸ”² å¡ç‰‡è§†å›¾</button>
            </div>

            <!-- ç”¨æˆ·åˆ—è¡¨ - è¡¨æ ¼è§†å›¾ -->
            <div id="tableView" class="users-table-container">
                <table class="users-table">
                    <thead>
                        <tr>
                            <th>ç”¨æˆ·ä¿¡æ¯</th>
                            <th>çŠ¶æ€</th>
                            <th>ç±»å‹</th>
                            <th>æ³¨å†Œæ—¶é—´</th>
                            <th>æœ€åç™»å½•</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- ç”¨æˆ·æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>

            <!-- ç”¨æˆ·åˆ—è¡¨ - å¡ç‰‡è§†å›¾ -->
            <div id="gridView" class="users-grid" style="display: none;">
                <!-- ç”¨æˆ·å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- åˆ†é¡µ -->
            <div class="pagination">
                <button class="pagination-btn" onclick="changePage('prev')" id="prevBtn">ä¸Šä¸€é¡µ</button>
                <button class="pagination-btn active" onclick="changePage(1)">1</button>
                <button class="pagination-btn" onclick="changePage(2)">2</button>
                <button class="pagination-btn" onclick="changePage(3)">3</button>
                <button class="pagination-btn" onclick="changePage(4)">4</button>
                <button class="pagination-btn" onclick="changePage(5)">5</button>
                <button class="pagination-btn" onclick="changePage('next')" id="nextBtn">ä¸‹ä¸€é¡µ</button>
            </div>
        </main>
    </div>

    <!-- Dancol JS -->
    <script src="../assets/js/dancol-core.js"></script>
    <script src="../assets/js/dancol-theme.js"></script>
    <script src="../assets/js/dancol-toast.js"></script>

    <!-- ç”¨æˆ·ç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="userModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">æ·»åŠ ç”¨æˆ·</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="dancol-form-label">å¤´åƒ</label>
                            <div class="avatar-upload">
                                <img id="avatarPreview" src="../assets/images/avatar.jpg"
                                     class="dancol-avatar dancol-avatar-xl" alt="å¤´åƒé¢„è§ˆ">
                                <input type="file" id="avatarInput" accept="image/*" style="display: none;"
                                       onchange="previewAvatar(this)">
                                <button type="button" class="upload-btn" onclick="document.getElementById('avatarInput').click()">
                                    é€‰æ‹©å¤´åƒ
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="dancol-form-label">ç”¨æˆ·å</label>
                            <input type="text" class="dancol-form-control" id="userName" required>
                        </div>
                        <div class="form-group">
                            <label class="dancol-form-label">é‚®ç®±</label>
                            <input type="email" class="dancol-form-control" id="userEmail" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="dancol-form-label">æ‰‹æœºå·</label>
                            <input type="tel" class="dancol-form-control" id="userPhone">
                        </div>
                        <div class="form-group">
                            <label class="dancol-form-label">ç”¨æˆ·ç±»å‹</label>
                            <select class="dancol-form-control" id="userType">
                                <option value="regular">æ™®é€šç”¨æˆ·</option>
                                <option value="vip">VIPç”¨æˆ·</option>
                                <option value="admin">ç®¡ç†å‘˜</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="dancol-form-label">çŠ¶æ€</label>
                            <select class="dancol-form-control" id="userStatus">
                                <option value="active">æ´»è·ƒ</option>
                                <option value="inactive">éæ´»è·ƒ</option>
                                <option value="banned">å·²ç¦ç”¨</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="dancol-btn dancol-btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
                <button class="dancol-btn dancol-btn-primary" onclick="saveUser()">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®
        const usersData = [
            {
                id: 1,
                name: 'å¼ å°æ˜',
                email: 'zhangxm@example.com',
                phone: '138****1234',
                avatar: '../assets/images/avatar.jpg',
                status: 'active',
                type: 'vip',
                registerDate: '2024-01-15',
                lastLogin: '2024-01-20 14:30',
                orders: 25,
                spending: 15680
            },
            {
                id: 2,
                name: 'æå°çº¢',
                email: 'lixh@example.com',
                phone: '139****5678',
                avatar: '../assets/images/avatar.jpg',
                status: 'active',
                type: 'regular',
                registerDate: '2024-01-10',
                lastLogin: '2024-01-19 09:15',
                orders: 8,
                spending: 3240
            },
            {
                id: 3,
                name: 'ç‹å¤§åŠ›',
                email: 'wangdl@example.com',
                phone: '137****9012',
                avatar: '../assets/images/avatar.jpg',
                status: 'inactive',
                type: 'regular',
                registerDate: '2024-01-05',
                lastLogin: '2024-01-10 16:45',
                orders: 3,
                spending: 890
            },
            {
                id: 4,
                name: 'èµµç¾ä¸½',
                email: 'zhaoml@example.com',
                phone: '136****3456',
                avatar: '../assets/images/avatar.jpg',
                status: 'active',
                type: 'vip',
                registerDate: '2023-12-20',
                lastLogin: '2024-01-20 11:20',
                orders: 42,
                spending: 28900
            },
            {
                id: 5,
                name: 'å­™å¿—å¼º',
                email: 'sunzq@example.com',
                phone: '135****7890',
                avatar: '../assets/images/avatar.jpg',
                status: 'banned',
                type: 'regular',
                registerDate: '2024-01-01',
                lastLogin: '2024-01-05 20:10',
                orders: 1,
                spending: 120
            },
            {
                id: 6,
                name: 'å‘¨å°èŠ³',
                email: 'zhouxf@example.com',
                phone: '134****2468',
                avatar: '../assets/images/avatar.jpg',
                status: 'active',
                type: 'admin',
                registerDate: '2023-11-15',
                lastLogin: '2024-01-20 08:30',
                orders: 0,
                spending: 0
            }
        ];

        let currentView = 'table';
        let filteredUsers = [...usersData];
        let currentPage = 1;
        const usersPerPage = 10;

        // ä¾§è¾¹æ åˆ‡æ¢åŠŸèƒ½
        function toggleSidebar() {
            const sidebar = document.getElementById('adminSidebar');
            sidebar.classList.toggle('active');
        }

        // è§†å›¾åˆ‡æ¢åŠŸèƒ½
        function switchView(view) {
            currentView = view;

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // åˆ‡æ¢è§†å›¾
            const tableView = document.getElementById('tableView');
            const gridView = document.getElementById('gridView');

            if (view === 'table') {
                tableView.style.display = 'block';
                gridView.style.display = 'none';
                renderTableView();
            } else {
                tableView.style.display = 'none';
                gridView.style.display = 'grid';
                renderGridView();
            }

            if (typeof Dancol !== 'undefined' && Dancol.Toast) {
                Dancol.Toast.info(`åˆ‡æ¢åˆ°${view === 'table' ? 'è¡¨æ ¼' : 'å¡ç‰‡'}è§†å›¾`);
            }
        }

        // æ¸²æŸ“è¡¨æ ¼è§†å›¾
        function renderTableView() {
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '';

            filteredUsers.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div class="user-info">
                            <img src="${user.avatar}" class="dancol-avatar dancol-avatar-md" alt="${user.name}">
                            <div class="user-details">
                                <div class="user-name">${user.name}</div>
                                <div class="user-email">${user.email}</div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="dancol-badge dancol-badge-${getStatusColor(user.status)}">
                            ${getStatusText(user.status)}
                        </span>
                    </td>
                    <td>
                        <span class="dancol-badge dancol-badge-${getTypeColor(user.type)}">
                            ${getTypeText(user.type)}
                        </span>
                    </td>
                    <td>${user.registerDate}</td>
                    <td>${user.lastLogin}</td>
                    <td>
                        <div class="user-actions">
                            <button class="action-btn edit" onclick="editUser(${user.id})">ç¼–è¾‘</button>
                            <button class="action-btn delete" onclick="deleteUser(${user.id})">åˆ é™¤</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // æ¸²æŸ“å¡ç‰‡è§†å›¾
        function renderGridView() {
            const gridView = document.getElementById('gridView');
            gridView.innerHTML = '';

            filteredUsers.forEach(user => {
                const card = document.createElement('div');
                card.className = 'user-card';
                card.innerHTML = `
                    <div class="user-card-header">
                        <img src="${user.avatar}" class="dancol-avatar dancol-avatar-lg dancol-img-border-primary" alt="${user.name}">
                        <div class="user-card-info">
                            <div class="user-card-name">${user.name}</div>
                            <div class="user-card-email">${user.email}</div>
                        </div>
                        <div>
                            <span class="dancol-badge dancol-badge-${getStatusColor(user.status)}">
                                ${getStatusText(user.status)}
                            </span>
                        </div>
                    </div>
                    <div class="user-card-stats">
                        <div class="stat-item">
                            <div class="stat-value">${user.orders}</div>
                            <div class="stat-label">è®¢å•æ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">Â¥${user.spending.toLocaleString()}</div>
                            <div class="stat-label">æ¶ˆè´¹é‡‘é¢</div>
                        </div>
                    </div>
                    <div class="user-card-actions">
                        <button class="dancol-btn dancol-btn-sm dancol-btn-outline" onclick="editUser(${user.id})">ç¼–è¾‘</button>
                        <button class="dancol-btn dancol-btn-sm dancol-btn-secondary" onclick="viewUser(${user.id})">æŸ¥çœ‹</button>
                        <button class="dancol-btn dancol-btn-sm" style="background: var(--dancol-error); color: white;" onclick="deleteUser(${user.id})">åˆ é™¤</button>
                    </div>
                `;
                gridView.appendChild(card);
            });
        }

        // è·å–çŠ¶æ€é¢œè‰²
        function getStatusColor(status) {
            const colors = {
                'active': 'success',
                'inactive': 'warning',
                'banned': 'error'
            };
            return colors[status] || 'secondary';
        }

        // è·å–çŠ¶æ€æ–‡æœ¬
        function getStatusText(status) {
            const texts = {
                'active': 'æ´»è·ƒ',
                'inactive': 'éæ´»è·ƒ',
                'banned': 'å·²ç¦ç”¨'
            };
            return texts[status] || status;
        }

        // è·å–ç±»å‹é¢œè‰²
        function getTypeColor(type) {
            const colors = {
                'vip': 'warning',
                'regular': 'info',
                'admin': 'primary'
            };
            return colors[type] || 'secondary';
        }

        // è·å–ç±»å‹æ–‡æœ¬
        function getTypeText(type) {
            const texts = {
                'vip': 'VIPç”¨æˆ·',
                'regular': 'æ™®é€šç”¨æˆ·',
                'admin': 'ç®¡ç†å‘˜'
            };
            return texts[type] || type;
        }

        // æœç´¢ç”¨æˆ·
        function searchUsers(query) {
            if (!query.trim()) {
                filteredUsers = [...usersData];
            } else {
                filteredUsers = usersData.filter(user =>
                    user.name.toLowerCase().includes(query.toLowerCase()) ||
                    user.email.toLowerCase().includes(query.toLowerCase()) ||
                    user.phone.includes(query)
                );
            }

            if (currentView === 'table') {
                renderTableView();
            } else {
                renderGridView();
            }
        }

        // æŒ‰çŠ¶æ€ç­›é€‰
        function filterByStatus(status) {
            if (!status) {
                filteredUsers = [...usersData];
            } else {
                filteredUsers = usersData.filter(user => user.status === status);
            }

            if (currentView === 'table') {
                renderTableView();
            } else {
                renderGridView();
            }
        }

        // æŒ‰ç±»å‹ç­›é€‰
        function filterByType(type) {
            if (!type) {
                filteredUsers = [...usersData];
            } else {
                filteredUsers = usersData.filter(user => user.type === type);
            }

            if (currentView === 'table') {
                renderTableView();
            } else {
                renderGridView();
            }
        }

        // æŒ‰æ—¥æœŸç­›é€‰
        function filterByDate(period) {
            const now = new Date();
            let startDate;

            switch(period) {
                case 'today':
                    startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                    break;
                case 'week':
                    startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                    break;
                case 'month':
                    startDate = new Date(now.getFullYear(), now.getMonth(), 1);
                    break;
                default:
                    filteredUsers = [...usersData];
                    if (currentView === 'table') {
                        renderTableView();
                    } else {
                        renderGridView();
                    }
                    return;
            }

            filteredUsers = usersData.filter(user => {
                const userDate = new Date(user.registerDate);
                return userDate >= startDate;
            });

            if (currentView === 'table') {
                renderTableView();
            } else {
                renderGridView();
            }
        }

        // é‡ç½®ç­›é€‰
        function resetFilters() {
            document.querySelectorAll('.search-input, .filter-select').forEach(input => {
                input.value = '';
            });
            filteredUsers = [...usersData];

            if (currentView === 'table') {
                renderTableView();
            } else {
                renderGridView();
            }

            if (typeof Dancol !== 'undefined' && Dancol.Toast) {
                Dancol.Toast.info('ç­›é€‰æ¡ä»¶å·²é‡ç½®');
            }
        }

        // æ·»åŠ ç”¨æˆ·
        function addUser() {
            document.getElementById('modalTitle').textContent = 'æ·»åŠ ç”¨æˆ·';
            document.getElementById('userForm').reset();
            document.getElementById('avatarPreview').src = '../assets/images/avatar.jpg';
            showModal();
        }

        // ç¼–è¾‘ç”¨æˆ·
        function editUser(userId) {
            const user = usersData.find(u => u.id === userId);
            if (user) {
                document.getElementById('modalTitle').textContent = 'ç¼–è¾‘ç”¨æˆ·';
                document.getElementById('userName').value = user.name;
                document.getElementById('userEmail').value = user.email;
                document.getElementById('userPhone').value = user.phone;
                document.getElementById('userType').value = user.type;
                document.getElementById('userStatus').value = user.status;
                document.getElementById('avatarPreview').src = user.avatar;
                showModal();
            }
        }

        // æŸ¥çœ‹ç”¨æˆ·
        function viewUser(userId) {
            if (typeof Dancol !== 'undefined' && Dancol.Toast) {
                Dancol.Toast.info(`æŸ¥çœ‹ç”¨æˆ· ID: ${userId} çš„è¯¦ç»†ä¿¡æ¯`);
            }
        }

        // åˆ é™¤ç”¨æˆ·
        function deleteUser(userId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç”¨æˆ·å—ï¼Ÿ')) {
                const index = usersData.findIndex(u => u.id === userId);
                if (index > -1) {
                    usersData.splice(index, 1);
                    filteredUsers = filteredUsers.filter(u => u.id !== userId);

                    if (currentView === 'table') {
                        renderTableView();
                    } else {
                        renderGridView();
                    }

                    if (typeof Dancol !== 'undefined' && Dancol.Toast) {
                        Dancol.Toast.success('ç”¨æˆ·åˆ é™¤æˆåŠŸ');
                    }
                }
            }
        }

        // å¯¼å‡ºç”¨æˆ·æ•°æ®
        function exportUsers() {
            if (typeof Dancol !== 'undefined' && Dancol.Toast) {
                Dancol.Toast.success('ç”¨æˆ·æ•°æ®å¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­...');
            }
        }

        // æ˜¾ç¤ºæ¨¡æ€æ¡†
        function showModal() {
            document.getElementById('userModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('userModal').style.display = 'none';
            document.body.style.overflow = '';
        }

        // ä¿å­˜ç”¨æˆ·
        function saveUser() {
            const name = document.getElementById('userName').value;
            const email = document.getElementById('userEmail').value;
            const phone = document.getElementById('userPhone').value;
            const type = document.getElementById('userType').value;
            const status = document.getElementById('userStatus').value;
            const avatar = document.getElementById('avatarPreview').src;

            if (!name || !email) {
                if (typeof Dancol !== 'undefined' && Dancol.Toast) {
                    Dancol.Toast.error('è¯·å¡«å†™å¿…å¡«å­—æ®µ');
                }
                return;
            }

            // è¿™é‡Œåº”è¯¥å‘é€åˆ°æœåŠ¡å™¨ä¿å­˜
            if (typeof Dancol !== 'undefined' && Dancol.Toast) {
                Dancol.Toast.success('ç”¨æˆ·ä¿¡æ¯ä¿å­˜æˆåŠŸ');
            }

            closeModal();
        }

        // å¤´åƒé¢„è§ˆ
        function previewAvatar(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('avatarPreview').src = e.target.result;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // åˆ†é¡µåŠŸèƒ½
        function changePage(page) {
            if (page === 'prev') {
                if (currentPage > 1) currentPage--;
            } else if (page === 'next') {
                if (currentPage < 5) currentPage++;
            } else {
                currentPage = page;
            }

            // æ›´æ–°åˆ†é¡µæŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.pagination-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            const pageBtn = document.querySelector(`.pagination-btn[onclick="changePage(${currentPage})"]`);
            if (pageBtn) {
                pageBtn.classList.add('active');
            }

            if (typeof Dancol !== 'undefined' && Dancol.Toast) {
                Dancol.Toast.info(`åˆ‡æ¢åˆ°ç¬¬ ${currentPage} é¡µ`);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–è¡¨æ ¼è§†å›¾
            renderTableView();

            // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¾§è¾¹æ ï¼ˆç§»åŠ¨ç«¯ï¼‰
            document.addEventListener('click', function(e) {
                const sidebar = document.getElementById('adminSidebar');
                const menuToggle = document.querySelector('.mobile-menu-toggle');

                if (window.innerWidth <= 768 &&
                    !sidebar.contains(e.target) &&
                    !menuToggle.contains(e.target) &&
                    sidebar.classList.contains('active')) {
                    sidebar.classList.remove('active');
                }
            });

            // ç‚¹å‡»å¤–éƒ¨å…³é—­æ¨¡æ€æ¡†
            document.getElementById('userModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });

            // ESCé”®å…³é—­æ¨¡æ€æ¡†
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });

            // çª—å£å¤§å°å˜åŒ–æ—¶è‡ªåŠ¨å…³é—­ç§»åŠ¨ç«¯ä¾§è¾¹æ 
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    const sidebar = document.getElementById('adminSidebar');
                    sidebar.classList.remove('active');
                }
            });

            // æ¬¢è¿æ¶ˆæ¯
            setTimeout(() => {
                if (typeof Dancol !== 'undefined' && Dancol.Toast) {
                    Dancol.Toast.success('ç”¨æˆ·ç®¡ç†ç³»ç»ŸåŠ è½½å®Œæˆï¼', {
                        position: 'top-right',
                        duration: 3000
                    });
                }
            }, 500);
        });
    </script>

    <style>
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal-content {
            background: var(--dancol-bg-primary);
            border-radius: var(--dancol-radius-lg);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--dancol-shadow-lg);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--dancol-spacing-lg);
            border-bottom: 1px solid var(--dancol-border-light);
        }

        .modal-header h3 {
            margin: 0;
            font-size: var(--dancol-text-lg);
            font-weight: 600;
            color: var(--dancol-text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dancol-text-muted);
            padding: var(--dancol-spacing-xs);
            border-radius: var(--dancol-radius-sm);
            transition: all var(--dancol-transition-fast);
        }

        .modal-close:hover {
            background-color: var(--dancol-bg-secondary);
            color: var(--dancol-text-primary);
        }

        .modal-body {
            padding: var(--dancol-spacing-lg);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: var(--dancol-spacing-sm);
            padding: var(--dancol-spacing-lg);
            border-top: 1px solid var(--dancol-border-light);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--dancol-spacing-md);
            margin-bottom: var(--dancol-spacing-md);
        }

        .form-row:last-child {
            margin-bottom: 0;
        }

        .form-row .form-group:only-child {
            grid-column: 1 / -1;
        }

        .avatar-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--dancol-spacing-md);
            padding: var(--dancol-spacing-lg);
            border: 2px dashed var(--dancol-border-medium);
            border-radius: var(--dancol-radius-md);
            text-align: center;
        }

        .upload-btn {
            padding: var(--dancol-spacing-sm) var(--dancol-spacing-md);
            background: var(--dancol-primary);
            color: white;
            border: none;
            border-radius: var(--dancol-radius-md);
            cursor: pointer;
            font-size: var(--dancol-text-sm);
            transition: background-color var(--dancol-transition-fast);
        }

        .upload-btn:hover {
            background: var(--dancol-primary-dark);
        }

        /* å¤´éƒ¨ç”¨æˆ·ä¿¡æ¯æ ·å¼è¡¥å…… */
        .header-user {
            display: flex;
            align-items: center;
            gap: var(--dancol-spacing-sm);
            cursor: pointer;
            padding: var(--dancol-spacing-xs) var(--dancol-spacing-sm);
            border-radius: var(--dancol-radius-md);
            transition: background-color var(--dancol-transition-fast);
        }

        .header-user:hover {
            background-color: var(--dancol-bg-secondary);
        }

        .user-name {
            font-size: var(--dancol-text-sm);
            font-weight: 500;
            color: var(--dancol-text-primary);
        }

        .user-role {
            font-size: var(--dancol-text-xs);
            color: var(--dancol-text-muted);
        }

        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 480px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
                margin: var(--dancol-spacing-md);
            }

            .modal-header,
            .modal-body,
            .modal-footer {
                padding: var(--dancol-spacing-md);
            }

            .avatar-upload {
                padding: var(--dancol-spacing-md);
            }
        }
    </style>
</body>
</html>
